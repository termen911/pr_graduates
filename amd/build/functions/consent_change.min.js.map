{"version":3,"sources":["../../src/functions/consent_change.js"],"names":["consent","consentLink","document","getElementById","event","addEventListener","e","preventDefault","dataset","change","ajax","call","methodname","args","done","successAjax","fail","Notification","exception","message","innerHTML","alert","init"],"mappings":"iMAAA,OACA,O,sDAMIA,CAAAA,C,CACAC,CAAW,CAAGC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,C,CACZC,CAAK,CAAG,UAAM,CAChB,GAAIH,CAAJ,CAAiB,CACbA,CAAW,CAACI,gBAAZ,CAA6B,OAA7B,CAAsC,SAAUC,CAAV,CAAa,CAC/CA,CAAC,CAACC,cAAF,GACAP,CAAO,EAAU,KAAKQ,OAAL,CAAaR,OAA9B,CACAS,CAAM,EACT,CAJD,CAKH,CACJ,C,CAMKA,CAAM,CAAG,UAAM,CACjBC,UAAKC,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,2BADL,CAEPC,IAAI,CAAE,CACFb,OAAO,CAAEA,CADP,CAFC,CAKPc,IAAI,CAAEC,CALC,CAMPC,IAAI,CAAEC,UAAaC,SANZ,CAAD,CAAV,CAQH,C,CAEKH,CAAW,CAAG,UAAM,CACtB,GAAII,CAAAA,CAAO,CAAG,EAAd,CACA,IAAWnB,CAAX,CAAqB,CACjBC,CAAW,CAACmB,SAAZ,CAAwB,qRAAxB,CACAnB,CAAW,CAACO,OAAZ,CAAoBR,OAApB,CAA8B,GAA9B,CACAmB,CAAO,CAAG,+IACb,CAJD,IAIO,CAEHlB,CAAW,CAACmB,SAAZ,CAAwB,6PAAxB,CACAnB,CAAW,CAACO,OAAZ,CAAoBR,OAApB,CAA8B,GAA9B,CACAmB,CAAO,CAAG,uKACb,CACDF,UAAaI,KAAb,CAAmB,sHAAnB,CAA4CF,CAA5C,CAAqD,4CAArD,CACH,C,WAEc,CAACG,IAAI,CA9BP,QAAPA,CAAAA,IAAO,EAAM,CACflB,CAAK,EACR,CA4Bc,C","sourcesContent":["import ajax from 'core/ajax';\nimport Notification from 'core/notification';\n\n/**\n * @module local_pr_graduates/functions/consent_change\n */\n\nlet consent;\nlet consentLink = document.getElementById('consent_link');\nconst event = () => {\n    if (consentLink) {\n        consentLink.addEventListener('click', function (e) {\n            e.preventDefault();\n            consent = Number(this.dataset.consent);\n            change();\n        });\n    }\n};\n\nconst init = () => {\n    event();\n};\n\nconst change = () => {\n    ajax.call([{\n        methodname: 'local_pr_graduate_consent',\n        args: {\n            consent: consent\n        },\n        done: successAjax,\n        fail: Notification.exception,\n    }]);\n};\n\nconst successAjax = () => {\n    let message = '';\n    if (Number(consent)) {\n        consentLink.innerHTML = \"Отозвать согласие на обработку персональных данных\";\n        consentLink.dataset.consent = '0';\n        message = 'Ваше согласие успешно дано';\n    } else {\n\n        consentLink.innerHTML = \"Дать согласие на обработку персональных данных\";\n        consentLink.dataset.consent = '1';\n        message = 'Ваше согласие успешно отозвано';\n    }\n    Notification.alert('Согласие на обработку', message, 'Закрыть');\n};\n\nexport default {init};"],"file":"consent_change.min.js"}